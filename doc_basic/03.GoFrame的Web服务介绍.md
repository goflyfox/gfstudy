# GoFrame的Web服务介绍

`GF`框架提供了非常强大的`WebServer`，由`ghttp`模块实现。实现了丰富完善的相关组件，例如：Router、Cookie、Session、路由注册、配置管理、模板引擎、缓存控制等等，支持热重启、热更新、多域名、多端口、多实例、HTTPS、Rewrite等等特性。

HTTP协议书籍推荐：《HTTP权威指南》、《图解HTTP》。需要的也可以找我发PDF版本

## 一、web基本介绍

电脑浏览器(Browser)就是**客户端**(Client)，大型的服务器就是**服务端**（Server）；浏览器发送HTTP请求，即客户端通过网络将需求发给服务端，然后服务端也是通过网络将数据发给客户端；

<img src="03.goframe的WEB服务介绍.assets/image-20200319225300542.png" alt="image-20200319225300542" style="zoom:50%;" />

## 二、GF搭建web项目

这里主要介绍基本项目启动和配置参数

### 目录结构

```bash
web:.
│  go.mod   -- go module
│  go.sum
│  main.go  -- 启动文件
│
├─config
│      config.yaml --配置文件
│
├─gflogs
│      2023-09-19.log -- gf系统日志
│      access-20230919.log -- 访问日志
│      error-20230919.log  -- 异常日志
│
├─logs
│      2023-09-19.log -- 业务日志
│
└─public
        hello.html -- 静态文件
        index.html -- 静态入口文件
```

### main.go

```go
package main

import (
	"github.com/gogf/gf/v2/frame/g"
	"github.com/gogf/gf/v2/net/ghttp"
	"github.com/gogf/gf/v2/os/glog"
)

func main() {
	s := g.Server()
	g.Cfg()
	// 测试日志
	s.BindHandler("/welcome", func(r *ghttp.Request) {

		glog.Info(r.GetCtx(), "你来了！")
		glog.Error(r.GetCtx(), "你异常啦！")
		r.Response.Write("哈喽世界！")
	})
	// 异常处理
	s.BindHandler("/panic", func(r *ghttp.Request) {
		glog.Panic(r.GetCtx(), "123")
	})
	// post请求
	s.BindHandler("POST:/hello", func(r *ghttp.Request) {
		r.Response.Writeln("Hello World!")
	})
	s.Run()
}
```

### config.yaml

`GF`框架的核心组件均实现了便捷的文件配置管理方式，包括`Server`、日志组件、数据库ORM、模板引擎等等，非常强大便捷。

配置文件可参考：https://goframe.org/docs/web/server-config-file-template

```yaml
server:
  Address: :8199 # 端口号
  ServerRoot: public   # 静态目录
  IndexFiles: # 入口文件
    - index.html
    - main.html
  AccessLogEnabled: true   # 系统访问日志
  ErrorLogEnabled: true    # 系统异常日志panic
  LogPath: gflogs    # 系统日志目录，启动，访问，异常
logger:
  path: logs   # 标准日志目录
  level: all   # 日志级别
```

## 三、启动日志

```bash
% mkdir goweb
% cd goweb 
% go mod init gfweb 
go: creating new go.mod: module gfweb
% ls
go.mod
% vi config.yaml
% vi main.go
% go get github.com/gogf/gf/v2
go: added github.com/gogf/gf/v2 v2.9.0
% go mod tidy
go: finding module for package github.com/kr/text
go: found github.com/kr/text in github.com/kr/text v0.2.0
% go run main.go 
2025-07-04T20:04:48.690+08:00 [FATA] SetServerRoot failed: cannot find "public" in following paths:
1. /Users/george/ws/go/goweb
2. /var/folders/7v/fr3gkb0s1jggs36lqd652frw0000gn/T/go-build125693734/b001/exe
1. cannot find "public" in following paths:
1. /Users/george/ws/go/goweb
2. /var/folders/7v/fr3gkb0s1jggs36lqd652frw0000gn/T/go-build125693734/b001/exe
   1).  main.main
        /Users/george/ws/go/goweb/main.go:10
 
Stack:
1.  main.main
    /Users/george/ws/go/goweb/main.go:10

exit status 1
% mkdir public
% go run main.go
2025-07-04T20:05:03.176+08:00 [DEBU] SetServerRoot path: /Users/george/ws/go/goweb/public
2025-07-04T20:05:03.177+08:00 [INFO] pid[61911]: http server started listening on [:8199]
2025-07-04T20:05:03.178+08:00 [INFO] openapi specification is disabled

  ADDRESS | METHOD |  ROUTE   |     HANDLER     | MIDDLEWARE  
----------|--------|----------|-----------------|-------------
  :8199   | POST   | /hello   | main.main.func3 |             
----------|--------|----------|-----------------|-------------
  :8199   | ALL    | /panic   | main.main.func2 |             
----------|--------|----------|-----------------|-------------
  :8199   | ALL    | /welcome | main.main.func1 |             
----------|--------|----------|-----------------|-------------

```

